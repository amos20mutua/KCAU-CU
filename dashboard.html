<!DOCTYPE html>
<html>
<head>
    <title>Dashboard - KCA Christian Union</title>
    <!-- Your existing CSS -->
</head>
<body>
    <div class="dashboard-container">
        <!-- Your existing dashboard HTML -->
        <div id="userInfo"></div>
        <button id="logoutBtn">Logout</button>
    </div>

    <!-- Supabase JS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        // Initialize Supabase client
        const supabaseUrl = 'YOUR_SUPABASE_PROJECT_URL'
        const supabaseAnonKey = 'YOUR_SUPABASE_ANON_KEY'
        const supabase = supabase.createClient(supabaseUrl, supabaseAnonKey)

        // Check if user is logged in
        async function checkUser() {
            const { data: { session }, error } = await supabase.auth.getSession()
            
            if (!session) {
                // Redirect to login if not authenticated
                window.location.href = 'login.html'
                return
            }

            // Fetch user profile
            const { data: profile, error: profileError } = await supabase
                .from('users')
                .select('*')
                .eq('id', session.user.id)
                .single()

            if (profile) {
                document.getElementById('userInfo').innerHTML = `
                    <h2>Welcome, ${profile.full_name}!</h2>
                `
            }
        }

        // Handle logout
        document.getElementById('logoutBtn').addEventListener('click', async function() {
            await supabase.auth.signOut()
            window.location.href = 'login.html'
        })

        // Check user on page load
        checkUser()
    </script>
</body>
</html> 